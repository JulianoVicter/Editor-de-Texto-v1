{% extends "base.html" %}
{% load static %}

{% block title %}{{ doc.title }}{% endblock %}

{% block head %}
  <link rel="stylesheet" href="{% static 'keyboard/keyboard.css' %}">
{% endblock %}

{% block content %}
<section class="panel panel-tight">
  <div class="panel-header">
    <div class="row gap">
      <a class="btn btn-ghost" href="{% url 'doc_list' %}">← Voltar</a>
      <span class="chip">Documento</span>
    </div>
    <div class="row gap">
      <span id="status" class="status">Pronto</span>
      <button id="saveBtn" class="btn btn-primary" type="button">Salvar</button>
    </div>
  </div>

  <form method="post" action="#" class="editor-form">
    <label class="field-label" for="title">Título</label>
    <input id="title" class="input title-input" value="{{ doc.title }}" placeholder="Título do documento">
  </form>
</section>

<section class="panel">
  <div class="keyboard-header">
    <span class="kbd-title">Teclado Virtual</span>
    <button id="toggleLayout" class="btn btn-ghost" type="button">Latin</button>
  </div>
  <div id="keyboard" class="keyboard" aria-label="Teclado virtual"></div>
</section>

<section class="panel">
  <h2>Conversão para Grego Arcaico</h2>
  <p class="muted">A conversão é apenas de caracteres, sem alterar palavras ou pontuação.</p>
  <div class="split">
    <div>
      <label class="field-label" for="content">Texto original</label>
      <textarea id="content" class="editor-area" rows="14" placeholder="Cole ou escreva o texto...">{{ doc.content }}</textarea>
    </div>
    <div>
      <label class="field-label" for="converted">Texto convertido</label>
      <textarea id="converted" class="editor-area" rows="14" readonly></textarea>
    </div>
  </div>
  <div id="diffs" class="diffs"></div>
</section>
{% endblock %}

{% block scripts %}
  <script>
    const SAVE_URL = "{% url 'doc_save' doc.id %}";
  </script>
  <script src="{% static 'js/editor.js' %}"></script>
  <script src="{% static 'keyboard/keyboard.js' %}"></script>
  <script src="{% static 'js/physical_greek.js' %}"></script>
  <script src="{% static 'js/greek_convert.js' %}"></script>
{% endblock %}
